<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>编译原理实验 | ZQLog</title>
<meta name=keywords content="编译原理"><meta name=description content='#include <cstring> #include <valarray> #include <iostream> #include <string> using namespace std; //宏定义声明 //实现词法分析所需 //宏定义各种符号类型 #define DIGIT 1 #define POINT 2 #define OTHER 3 #define POWER 4 #define PLUS 5 #define MINUS 6 # define ID 7 # define INT 8 # define REAL 9 # define LT 10 # define LE 11 # define EQ 12 # define NE 13 # define GT 14 # define GE 15 # define IS 16 # define PL 17 # define MI 18 # define MU 19 # define DI 20 # define AND 21 # define OR 22 # define NOT 23 # define STR 24 # define CHAR 25 # define OCT 26 # define HEX 27 # define LB 28 # define RB 29 # define NS 30 # define UCON 97 # define ClassOther 200 # define EndState -1 #define MAX_KEY_NUMBER 20 /*关键字的数量*/ #define KEY_WORD_END "#" /*关键字结束标记*/ //输出设置（为区分实验结果） int mode = 0; // 变量定义 // 实现词法分析所需 const int N=10000;// 够用 char *KeyWordTable[MAX_KEY_NUMBER]={"begin","end", "const","var","if", "else",KEY_WORD_END};//关键词表 //实数分析 int w,n,p,e,d;//实数分析所需 int Class;//实数分析类别 int ICON;//实数分析 float FCON;//实数分析的值 static int CurrentState;//实数分析当前状态 //扫描用 int adx=1,ady=1;//当前读入的位置 char ch; //当前读入的字符，必须要设定这个全局变量，在回退之前检查一下是否为EOF,在scanner中为EOF不回退 char TOKEN[20];//每个读入单词 //实现语法分析所需 int sta[10010];//状态栈 int syb[10010];//符号栈 int mea[1010];//语义栈 int stat=0,sybt=0; int meat=0;//以上三栈的栈顶 int topsta;//状态栈顶,在action表中用 int inpsym;//输入符号串顶，在action表中用 //语法本身 char* action[200][200];//action表 int Goto[200][200];//goto表 string R1[100][2]= {{"S","E"},{"E","E+T"},{"E","E-T"},{"E","T"},{"T","T*F"}, {"T","T*F"},{"T","F"},{"F","(E)"},{"F","i"}};//语法 char follow[300][50]; //实现语义分析所需 int idx=0;//每个键值对的索引（key,value） string valu[N];//每个单词的值 int cla[N];//每个单词的类型 int chra[N];//每个单词在语法中扮演的角色 int T[N]={}; int tt=1;//临时变量编号 //函数定义 //报错函数 void report_error(int errcla){ int k=0; char* str; switch (errcla){ case 1: str = "十六进制数表示错误"; break; case 2: str = "八进制数表示错误"; break; case 3: str = "字符型常量定义错误"; break; case 4: str = "非法运算符"; break; case 5: str = "未定义符号"; break; case 6: str="语法错误"; k=1; break; case 7: str = "未找到表达式"; k=2; break; case 8: str = "不是算符优先文法"; k=2; break; case 11: str="缺少运算分量"; k=2; break; case 12: str="不匹配的右括号"; k=2; break; case 13: str="缺少运算符"; k=2; break; case 14: str="缺少右括号"; k=2; break; } if(!'><meta name=author content="作者：zql"><link rel=canonical href=http://localhost:1313/posts/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/Icon_W.jpg><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/Icon_W.jpg><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/Icon_W.jpg><link rel=apple-touch-icon href=http://localhost:1313/Icon_W.jpg><link rel=mask-icon href=http://localhost:1313/Icon_W.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link href="https://fonts.cdnfonts.com/css/code-new-roman?styles=20776" rel=stylesheet><style>@import 'https://fonts.cdnfonts.com/css/code-new-roman'</style><meta property="og:title" content="编译原理实验"><meta property="og:description" content='#include <cstring> #include <valarray> #include <iostream> #include <string> using namespace std; //宏定义声明 //实现词法分析所需 //宏定义各种符号类型 #define DIGIT 1 #define POINT 2 #define OTHER 3 #define POWER 4 #define PLUS 5 #define MINUS 6 # define ID 7 # define INT 8 # define REAL 9 # define LT 10 # define LE 11 # define EQ 12 # define NE 13 # define GT 14 # define GE 15 # define IS 16 # define PL 17 # define MI 18 # define MU 19 # define DI 20 # define AND 21 # define OR 22 # define NOT 23 # define STR 24 # define CHAR 25 # define OCT 26 # define HEX 27 # define LB 28 # define RB 29 # define NS 30 # define UCON 97 # define ClassOther 200 # define EndState -1 #define MAX_KEY_NUMBER 20 /*关键字的数量*/ #define KEY_WORD_END "#" /*关键字结束标记*/ //输出设置（为区分实验结果） int mode = 0; // 变量定义 // 实现词法分析所需 const int N=10000;// 够用 char *KeyWordTable[MAX_KEY_NUMBER]={"begin","end", "const","var","if", "else",KEY_WORD_END};//关键词表 //实数分析 int w,n,p,e,d;//实数分析所需 int Class;//实数分析类别 int ICON;//实数分析 float FCON;//实数分析的值 static int CurrentState;//实数分析当前状态 //扫描用 int adx=1,ady=1;//当前读入的位置 char ch; //当前读入的字符，必须要设定这个全局变量，在回退之前检查一下是否为EOF,在scanner中为EOF不回退 char TOKEN[20];//每个读入单词 //实现语法分析所需 int sta[10010];//状态栈 int syb[10010];//符号栈 int mea[1010];//语义栈 int stat=0,sybt=0; int meat=0;//以上三栈的栈顶 int topsta;//状态栈顶,在action表中用 int inpsym;//输入符号串顶，在action表中用 //语法本身 char* action[200][200];//action表 int Goto[200][200];//goto表 string R1[100][2]= {{"S","E"},{"E","E+T"},{"E","E-T"},{"E","T"},{"T","T*F"}, {"T","T*F"},{"T","F"},{"F","(E)"},{"F","i"}};//语法 char follow[300][50]; //实现语义分析所需 int idx=0;//每个键值对的索引（key,value） string valu[N];//每个单词的值 int cla[N];//每个单词的类型 int chra[N];//每个单词在语法中扮演的角色 int T[N]={}; int tt=1;//临时变量编号 //函数定义 //报错函数 void report_error(int errcla){ int k=0; char* str; switch (errcla){ case 1: str = "十六进制数表示错误"; break; case 2: str = "八进制数表示错误"; break; case 3: str = "字符型常量定义错误"; break; case 4: str = "非法运算符"; break; case 5: str = "未定义符号"; break; case 6: str="语法错误"; k=1; break; case 7: str = "未找到表达式"; k=2; break; case 8: str = "不是算符优先文法"; k=2; break; case 11: str="缺少运算分量"; k=2; break; case 12: str="不匹配的右括号"; k=2; break; case 13: str="缺少运算符"; k=2; break; case 14: str="缺少右括号"; k=2; break; } if(!'><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-04-30T21:47:13+08:00"><meta property="article:modified_time" content="2024-04-30T21:47:13+08:00"><meta property="og:site_name" content="ZQLog"><meta name=twitter:card content="summary"><meta name=twitter:title content="编译原理实验"><meta name=twitter:description content='#include <cstring> #include <valarray> #include <iostream> #include <string> using namespace std; //宏定义声明 //实现词法分析所需 //宏定义各种符号类型 #define DIGIT 1 #define POINT 2 #define OTHER 3 #define POWER 4 #define PLUS 5 #define MINUS 6 # define ID 7 # define INT 8 # define REAL 9 # define LT 10 # define LE 11 # define EQ 12 # define NE 13 # define GT 14 # define GE 15 # define IS 16 # define PL 17 # define MI 18 # define MU 19 # define DI 20 # define AND 21 # define OR 22 # define NOT 23 # define STR 24 # define CHAR 25 # define OCT 26 # define HEX 27 # define LB 28 # define RB 29 # define NS 30 # define UCON 97 # define ClassOther 200 # define EndState -1 #define MAX_KEY_NUMBER 20 /*关键字的数量*/ #define KEY_WORD_END "#" /*关键字结束标记*/ //输出设置（为区分实验结果） int mode = 0; // 变量定义 // 实现词法分析所需 const int N=10000;// 够用 char *KeyWordTable[MAX_KEY_NUMBER]={"begin","end", "const","var","if", "else",KEY_WORD_END};//关键词表 //实数分析 int w,n,p,e,d;//实数分析所需 int Class;//实数分析类别 int ICON;//实数分析 float FCON;//实数分析的值 static int CurrentState;//实数分析当前状态 //扫描用 int adx=1,ady=1;//当前读入的位置 char ch; //当前读入的字符，必须要设定这个全局变量，在回退之前检查一下是否为EOF,在scanner中为EOF不回退 char TOKEN[20];//每个读入单词 //实现语法分析所需 int sta[10010];//状态栈 int syb[10010];//符号栈 int mea[1010];//语义栈 int stat=0,sybt=0; int meat=0;//以上三栈的栈顶 int topsta;//状态栈顶,在action表中用 int inpsym;//输入符号串顶，在action表中用 //语法本身 char* action[200][200];//action表 int Goto[200][200];//goto表 string R1[100][2]= {{"S","E"},{"E","E+T"},{"E","E-T"},{"E","T"},{"T","T*F"}, {"T","T*F"},{"T","F"},{"F","(E)"},{"F","i"}};//语法 char follow[300][50]; //实现语义分析所需 int idx=0;//每个键值对的索引（key,value） string valu[N];//每个单词的值 int cla[N];//每个单词的类型 int chra[N];//每个单词在语法中扮演的角色 int T[N]={}; int tt=1;//临时变量编号 //函数定义 //报错函数 void report_error(int errcla){ int k=0; char* str; switch (errcla){ case 1: str = "十六进制数表示错误"; break; case 2: str = "八进制数表示错误"; break; case 3: str = "字符型常量定义错误"; break; case 4: str = "非法运算符"; break; case 5: str = "未定义符号"; break; case 6: str="语法错误"; k=1; break; case 7: str = "未找到表达式"; k=2; break; case 8: str = "不是算符优先文法"; k=2; break; case 11: str="缺少运算分量"; k=2; break; case 12: str="不匹配的右括号"; k=2; break; case 13: str="缺少运算符"; k=2; break; case 14: str="缺少右括号"; k=2; break; } if(!'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"编译原理实验","item":"http://localhost:1313/posts/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"编译原理实验","name":"编译原理实验","description":"#include \u0026lt;cstring\u0026gt; #include \u0026lt;valarray\u0026gt; #include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; using namespace std; //宏定义声明 //实现词法分析所需 //宏定义各种符号类型 #define DIGIT 1 #define POINT 2 #define OTHER 3 #define POWER 4 #define PLUS 5 #define MINUS 6 # define ID 7 # define INT 8 # define REAL 9 # define LT 10 # define LE 11 # define EQ 12 # define NE 13 # define GT 14 # define GE 15 # define IS 16 # define PL 17 # define MI 18 # define MU 19 # define DI 20 # define AND 21 # define OR 22 # define NOT 23 # define STR 24 # define CHAR 25 # define OCT 26 # define HEX 27 # define LB 28 # define RB 29 # define NS 30 # define UCON 97 # define ClassOther 200 # define EndState -1 #define MAX_KEY_NUMBER 20 /*关键字的数量*/ #define KEY_WORD_END \u0026#34;#\u0026#34; /*关键字结束标记*/ //输出设置（为区分实验结果） int mode = 0; // 变量定义 // 实现词法分析所需 const int N=10000;// 够用 char *KeyWordTable[MAX_KEY_NUMBER]={\u0026#34;begin\u0026#34;,\u0026#34;end\u0026#34;, \u0026#34;const\u0026#34;,\u0026#34;var\u0026#34;,\u0026#34;if\u0026#34;, \u0026#34;else\u0026#34;,KEY_WORD_END};//关键词表 //实数分析 int w,n,p,e,d;//实数分析所需 int Class;//实数分析类别 int ICON;//实数分析 float FCON;//实数分析的值 static int CurrentState;//实数分析当前状态 //扫描用 int adx=1,ady=1;//当前读入的位置 char ch; //当前读入的字符，必须要设定这个全局变量，在回退之前检查一下是否为EOF,在scanner中为EOF不回退 char TOKEN[20];//每个读入单词 //实现语法分析所需 int sta[10010];//状态栈 int syb[10010];//符号栈 int mea[1010];//语义栈 int stat=0,sybt=0; int meat=0;//以上三栈的栈顶 int topsta;//状态栈顶,在action表中用 int inpsym;//输入符号串顶，在action表中用 //语法本身 char* action[200][200];//action表 int Goto[200][200];//goto表 string R1[100][2]= {{\u0026#34;S\u0026#34;,\u0026#34;E\u0026#34;},{\u0026#34;E\u0026#34;,\u0026#34;E+T\u0026#34;},{\u0026#34;E\u0026#34;,\u0026#34;E-T\u0026#34;},{\u0026#34;E\u0026#34;,\u0026#34;T\u0026#34;},{\u0026#34;T\u0026#34;,\u0026#34;T*F\u0026#34;}, {\u0026#34;T\u0026#34;,\u0026#34;T*F\u0026#34;},{\u0026#34;T\u0026#34;,\u0026#34;F\u0026#34;},{\u0026#34;F\u0026#34;,\u0026#34;(E)\u0026#34;},{\u0026#34;F\u0026#34;,\u0026#34;i\u0026#34;}};//语法 char follow[300][50]; //实现语义分析所需 int idx=0;//每个键值对的索引（key,value） string valu[N];//每个单词的值 int cla[N];//每个单词的类型 int chra[N];//每个单词在语法中扮演的角色 int T[N]={}; int tt=1;//临时变量编号 //函数定义 //报错函数 void report_error(int errcla){ int k=0; char* str; switch (errcla){ case 1: str = \u0026#34;十六进制数表示错误\u0026#34;; break; case 2: str = \u0026#34;八进制数表示错误\u0026#34;; break; case 3: str = \u0026#34;字符型常量定义错误\u0026#34;; break; case 4: str = \u0026#34;非法运算符\u0026#34;; break; case 5: str = \u0026#34;未定义符号\u0026#34;; break; case 6: str=\u0026#34;语法错误\u0026#34;; k=1; break; case 7: str = \u0026#34;未找到表达式\u0026#34;; k=2; break; case 8: str = \u0026#34;不是算符优先文法\u0026#34;; k=2; break; case 11: str=\u0026#34;缺少运算分量\u0026#34;; k=2; break; case 12: str=\u0026#34;不匹配的右括号\u0026#34;; k=2; break; case 13: str=\u0026#34;缺少运算符\u0026#34;; k=2; break; case 14: str=\u0026#34;缺少右括号\u0026#34;; k=2; break; } if(!","keywords":["编译原理"],"articleBody":" #include #include #include #include using namespace std; //宏定义声明 //实现词法分析所需 //宏定义各种符号类型 #define DIGIT 1 #define POINT 2 #define OTHER 3 #define POWER 4 #define PLUS 5 #define MINUS 6 # define ID 7 # define INT 8 # define REAL 9 # define LT 10 # define LE 11 # define EQ 12 # define NE 13 # define GT 14 # define GE 15 # define IS 16 # define PL 17 # define MI 18 # define MU 19 # define DI 20 # define AND 21 # define OR 22 # define NOT 23 # define STR 24 # define CHAR 25 # define OCT 26 # define HEX 27 # define LB 28 # define RB 29 # define NS 30 # define UCON 97 # define ClassOther 200 # define EndState -1 #define MAX_KEY_NUMBER 20 /*关键字的数量*/ #define KEY_WORD_END \"#\" /*关键字结束标记*/ //输出设置（为区分实验结果） int mode = 0; // 变量定义 // 实现词法分析所需 const int N=10000;// 够用 char *KeyWordTable[MAX_KEY_NUMBER]={\"begin\",\"end\", \"const\",\"var\",\"if\", \"else\",KEY_WORD_END};//关键词表 //实数分析 int w,n,p,e,d;//实数分析所需 int Class;//实数分析类别 int ICON;//实数分析 float FCON;//实数分析的值 static int CurrentState;//实数分析当前状态 //扫描用 int adx=1,ady=1;//当前读入的位置 char ch; //当前读入的字符，必须要设定这个全局变量，在回退之前检查一下是否为EOF,在scanner中为EOF不回退 char TOKEN[20];//每个读入单词 //实现语法分析所需 int sta[10010];//状态栈 int syb[10010];//符号栈 int mea[1010];//语义栈 int stat=0,sybt=0; int meat=0;//以上三栈的栈顶 int topsta;//状态栈顶,在action表中用 int inpsym;//输入符号串顶，在action表中用 //语法本身 char* action[200][200];//action表 int Goto[200][200];//goto表 string R1[100][2]= {{\"S\",\"E\"},{\"E\",\"E+T\"},{\"E\",\"E-T\"},{\"E\",\"T\"},{\"T\",\"T*F\"}, {\"T\",\"T*F\"},{\"T\",\"F\"},{\"F\",\"(E)\"},{\"F\",\"i\"}};//语法 char follow[300][50]; //实现语义分析所需 int idx=0;//每个键值对的索引（key,value） string valu[N];//每个单词的值 int cla[N];//每个单词的类型 int chra[N];//每个单词在语法中扮演的角色 int T[N]={}; int tt=1;//临时变量编号 //函数定义 //报错函数 void report_error(int errcla){ int k=0; char* str; switch (errcla){ case 1: str = \"十六进制数表示错误\"; break; case 2: str = \"八进制数表示错误\"; break; case 3: str = \"字符型常量定义错误\"; break; case 4: str = \"非法运算符\"; break; case 5: str = \"未定义符号\"; break; case 6: str=\"语法错误\"; k=1; break; case 7: str = \"未找到表达式\"; k=2; break; case 8: str = \"不是算符优先文法\"; k=2; break; case 11: str=\"缺少运算分量\"; k=2; break; case 12: str=\"不匹配的右括号\"; k=2; break; case 13: str=\"缺少运算符\"; k=2; break; case 14: str=\"缺少右括号\"; k=2; break; } if(!k){printf(\"词法分析发生错误!错误位置：第%d行，第%d个字符；错误类型：%s\\n\",adx,ady-1,str);} else if (k==2) { printf(\"语法分析发生错误！错误类型：%s, 错误位置：第%d行，第%d个字符\\n\", str, adx,ady); } return; } //实现语法分析所需 //自定义读入函数 char gc(FILE* fp,int index){//index是换行允许位 char ch =fgetc(fp); //printf(\"%c \",ch); if(ch=='\\n'\u0026\u0026index){ adx++; ady=1; // // printf(\"换行,%d\",adx); } else ady++; //printf(\"(%d,%d)\\n\",adx,ady); return ch; } void myfseek(FILE* fp ,int off ,int whence ){ if(ch!=EOF){ fseek(fp,off,whence); ady+=off; } } //查找类别并输出函数 int lookup (char *token) { int n=0; while (strcmp(KeyWordTable[n], KEY_WORD_END)) /*strcmp比较两串是否相同，若相同返回0*/ { if (!strcmp(KeyWordTable[n], token)) /*比较token所指向的关键字和保留字表中哪个关键字相符*/ { return n+1; /*根据单词分类码表I，设置正确的关键字类别码，并返回此类别码的值*/ } n++; } return 7; /*单词不是关键字，而是标识符*/ } void out(int c, string val) { char* str; switch (c) { case 1: str = \"BEGIN\"; break; case 2: str = \"END\"; break; case 3: str = \"CONST\"; break; case 4: str = \"VAR\"; break; case 5: str = \"IF\"; break; case 6: str = \"ELSE\"; break; case 7: str = \"ID\"; break; case 8: str=\"INT\"; break; case 9: str = \"REAL\"; break; case 10: str = \"LT\"; break; case 11: str = \"LE\"; break; case 12: str = \"EQ\"; break; case 13: str = \"NE\"; break; case 14: str = \"GT\"; break; case 15: str=\"GE\"; break; case 16: str = \"IS\"; break; case 17: str = \"PL\"; break; case 18: str = \"MI\"; break; case 19: str = \"MU\"; break; case 20: str = \"DI\"; break; case 21: str = \"AND\"; break; case 22: str = \"OR\"; break; case 23: str = \"NOT\"; break; case 24: str = \"STR\"; break; case 25: str = \"CHAR\"; break; case 26: str = \"OCT\"; break; case 27: str = \"HEX\"; break; case 28: str = \"LB\"; break; case 29: str = \"RB\"; break; case 30: str = \"NS\"; break; } cla[idx] = c; valu[idx] = val; if(c!=LB\u0026\u0026c!=RB\u0026\u0026c!=PL\u0026\u0026c!=MI\u0026\u0026c!=MU\u0026\u0026c!=DI\u0026\u0026c!=NS){//不是运算符号 chra[idx] = 'i'; } else { chra[idx] = c; } if(mode==1){ cout\u003c\u003c\"(\"\u003c\u003cstr\u003c\u003c\",\"\u003c\u003cval\u003c\u003c\")\"\u003c\u003cendl; } } //实验给的没啥用函数 int HandleOtherWord (void) { return ClassOther; } int HandleError (void){ printf(\"Error!\\n\"); return 0; } int GetChar (FILE* fp) { int c; c = gc(fp,0); if (c != EOF) { if (isdigit(c)) { d = c - '0'; return DIGIT; } if (c == '.') return POINT; if (c == 'E' || c == 'e') return POWER; if (c == '+') return PLUS; if (c == '-') return MINUS; } return OTHER;//返回当前字符的类 } int EXCUTE (int state, int symbol) { switch (state) { case 0:switch (symbol) { case DIGIT: n=0;p=0;e=1;w=d;CurrentState=1;Class=UCON;break; case POINT: w=0;n=0;p=0;e=1;CurrentState=3;Class=UCON;break; default: HandleOtherWord( );Class=ClassOther; CurrentState=EndState; } break; case 1:switch (symbol) { case DIGIT: w=w*10+d;break; //CurrentState=1 case POINT: CurrentState=2;break; case POWER: CurrentState=4;break; default: ICON=w;CurrentState=EndState; } break; case 2:switch (symbol) { case DIGIT: n++;w=w*10+d;break; case POWER: CurrentState=4;break; default: FCON=w*pow(10,e*p-n);CurrentState=EndState; } break; case 3:switch (symbol) { case DIGIT: n++;w=w*10+d;CurrentState=2;break; default: HandleError( );CurrentState=EndState; } break; case 4:switch (symbol) { case DIGIT: p=p*10+d;CurrentState=6;break; case MINUS: e=-1;CurrentState=5;break; case PLUS: CurrentState=5;break; default: HandleError( );CurrentState=EndState; } break; case 5:switch (symbol) { case DIGIT: p=p*10+d;CurrentState=6;break; default: HandleError( );CurrentState=EndState; } break; case 6:switch (symbol) { case DIGIT:p=p*10+d;break; default: FCON=w*pow(10,e*p-n);CurrentState=EndState; } break; } return CurrentState; } int LEX (FILE* fp) { int ch; CurrentState=0; while (CurrentState!=EndState) { ch=GetChar(fp); EXCUTE (CurrentState,ch); } myfseek(fp,-1,1); return Class; } //拓展实验分析十六进制数所需 int ISABCDEF(char x){ int n=0; char al[20]={'A','B','C','D','E','F','a','b','c','d','e','f','#'}; while (al[n]!='#') /*strcmp比较两串是否相同，若相同返回0*/ { if (al[n]==x) { return 1; } n++; } return 0; /*单词不是关键字，而是标识符*/ } //扫描器与单个扫描 void scanner(FILE *fp) { int i, c; ch=gc(fp,0); if (isalpha (ch)) { TOKEN[0]=ch; ch=gc(fp,0); i=1;//初始化 while (isalnum (ch))//是否为字母或者数字 { TOKEN[i]=ch; i++; ch=gc(fp,0); } TOKEN[i]= '\\0'; myfseek(fp,-1,1); c=lookup(TOKEN);//查找源程序， if(c==ID)out(c,TOKEN); else out(c,\" \"); } else if(isdigit(ch)) { //将数字部分读入token， TOKEN[0]=ch;i=1; if(ch=='0'){ ch=gc(fp,0); if(ch=='x'){ TOKEN[i]=ch; i++; ch=gc(fp,0); bool is=1; while(isalnum(ch)) { if(isalpha(ch)\u0026\u0026!ISABCDEF(ch)){ report_error(1); is=0; break; } TOKEN[i]=ch; i++; ch=gc(fp,0); } TOKEN[i]='\\0'; myfseek(fp,-1,1); if(is){ c=HEX; out(c,TOKEN); } } else if(isdigit(ch)){ bool is=1; while(isdigit(ch)) { if(ch\u003e='8'){ report_error(2); is=0; break; } else { TOKEN[i]=ch; i++; ch=gc(fp,0); } } myfseek(fp,-1,1); TOKEN[i]= '\\0'; if(is){ c=OCT; out(c,TOKEN); } } else { TOKEN[i]='\\0'; out(INT,TOKEN); } } else { ch=gc(fp,0); while(isdigit(ch)) { TOKEN[i]=ch; i++; ch=gc(fp,0); } if(ch=='.'||ch=='E'||ch=='e'){ myfseek(fp,-i-1,1); LEX(fp); c=REAL; if(mode==1){ cout\u003c\u003c \"(\" \u003c\u003c \"REAL,\" \u003c\u003cFCON\u003c\u003c \")\"\u003c\u003c endl; } //cout\u003c\u003c \"(\" \u003c\u003c \"REAL,\" \u003c","wordCount":"1599","inLanguage":"en","datePublished":"2024-04-30T21:47:13+08:00","dateModified":"2024-04-30T21:47:13+08:00","author":{"@type":"Person","name":"作者：zql"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C/"},"publisher":{"@type":"Organization","name":"ZQLog","logo":{"@type":"ImageObject","url":"http://localhost:1313/Icon_W.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="ZQLog (Alt + H)"><img src=http://localhost:1313/Icon_W.jpg alt aria-label=logo height=35>ZQLog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/posts/ title=posts><span>posts</span></a></li><li><a href=http://localhost:1313/tags/ title=tags><span>tags</span></a></li><li><a href=http://localhost:1313/archives/ title=archives><span>archives</span></a></li><li><a href=http://localhost:1313/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">编译原理实验</h1><div class=post-meta><span title='2024-04-30 21:47:13 +0800 CST'>2024-04-30</span>&nbsp;·&nbsp;1599 words&nbsp;·&nbsp;作者：zql</div></header><div class=post-content><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#7f848e>#include</span> <span style=color:#7f848e>&lt;cstring&gt;</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#include</span> <span style=color:#7f848e>&lt;valarray&gt;</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#include</span> <span style=color:#7f848e>&lt;iostream&gt;</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#include</span> <span style=color:#7f848e>&lt;string&gt;</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#c678dd>using</span> <span style=color:#c678dd>namespace</span> <span style=color:#e06c75>std</span>;
</span></span><span style=display:flex><span><span style=color:#7f848e>//宏定义声明
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//实现词法分析所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//宏定义各种符号类型
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#7f848e>#define DIGIT 1
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define POINT 2
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define OTHER 3
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define POWER 4
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define PLUS 5
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define MINUS 6
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define ID 7
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define INT 8
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define REAL 9
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define LT 10
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define LE 11
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define EQ 12
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define NE 13
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define GT 14
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define GE 15
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define IS 16
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define PL 17
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define MI 18
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define MU 19
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define DI 20
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define AND 21
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define OR 22
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define NOT 23
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define STR 24
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define CHAR 25
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define OCT 26
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define HEX 27
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define LB 28
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define RB 29
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define NS 30
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define UCON 97
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define ClassOther 200
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e># define EndState -1
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e>#define MAX_KEY_NUMBER 20  </span><span style=color:#7f848e>/*关键字的数量*/</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e>#define KEY_WORD_END &#34;#&#34;  </span><span style=color:#7f848e>/*关键字结束标记*/</span><span style=color:#7f848e>
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#7f848e>//输出设置（为区分实验结果）
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>mode</span> <span style=color:#56b6c2>=</span> <span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span><span style=color:#7f848e>// 变量定义
</span></span></span><span style=display:flex><span><span style=color:#7f848e>// 实现词法分析所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#c678dd>const</span> <span style=color:#e5c07b>int</span>  <span style=color:#e06c75>N</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>10000</span>;<span style=color:#7f848e>// 够用
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>char</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>KeyWordTable</span>[<span style=color:#e06c75>MAX_KEY_NUMBER</span>]<span style=color:#56b6c2>=</span>{<span style=color:#98c379>&#34;begin&#34;</span>,<span style=color:#98c379>&#34;end&#34;</span>, <span style=color:#98c379>&#34;const&#34;</span>,<span style=color:#98c379>&#34;var&#34;</span>,<span style=color:#98c379>&#34;if&#34;</span>, <span style=color:#98c379>&#34;else&#34;</span>,<span style=color:#e06c75>KEY_WORD_END</span>};<span style=color:#7f848e>//关键词表
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//实数分析
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>w</span>,<span style=color:#e06c75>n</span>,<span style=color:#e06c75>p</span>,<span style=color:#e06c75>e</span>,<span style=color:#e06c75>d</span>;<span style=color:#7f848e>//实数分析所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>Class</span>;<span style=color:#7f848e>//实数分析类别
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>ICON</span>;<span style=color:#7f848e>//实数分析
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>float</span> <span style=color:#e06c75>FCON</span>;<span style=color:#7f848e>//实数分析的值
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#c678dd>static</span> <span style=color:#e5c07b>int</span> <span style=color:#e06c75>CurrentState</span>;<span style=color:#7f848e>//实数分析当前状态
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//扫描用
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>adx</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>,<span style=color:#e06c75>ady</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;<span style=color:#7f848e>//当前读入的位置
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>char</span> <span style=color:#e06c75>ch</span>; <span style=color:#7f848e>//当前读入的字符，必须要设定这个全局变量，在回退之前检查一下是否为EOF,在scanner中为EOF不回退
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>char</span> <span style=color:#e06c75>TOKEN</span>[<span style=color:#d19a66>20</span>];<span style=color:#7f848e>//每个读入单词
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//实现语法分析所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>sta</span>[<span style=color:#d19a66>10010</span>];<span style=color:#7f848e>//状态栈
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>syb</span>[<span style=color:#d19a66>10010</span>];<span style=color:#7f848e>//符号栈
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>mea</span>[<span style=color:#d19a66>1010</span>];<span style=color:#7f848e>//语义栈
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>stat</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>,<span style=color:#e06c75>sybt</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>meat</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;<span style=color:#7f848e>//以上三栈的栈顶
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>topsta</span>;<span style=color:#7f848e>//状态栈顶,在action表中用
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>inpsym</span>;<span style=color:#7f848e>//输入符号串顶，在action表中用
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span><span style=color:#7f848e>//语法本身
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>char</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>action</span>[<span style=color:#d19a66>200</span>][<span style=color:#d19a66>200</span>];<span style=color:#7f848e>//action表
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>200</span>][<span style=color:#d19a66>200</span>];<span style=color:#7f848e>//goto表
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e06c75>string</span> <span style=color:#e06c75>R1</span>[<span style=color:#d19a66>100</span>][<span style=color:#d19a66>2</span>]<span style=color:#56b6c2>=</span> {{<span style=color:#98c379>&#34;S&#34;</span>,<span style=color:#98c379>&#34;E&#34;</span>},{<span style=color:#98c379>&#34;E&#34;</span>,<span style=color:#98c379>&#34;E+T&#34;</span>},{<span style=color:#98c379>&#34;E&#34;</span>,<span style=color:#98c379>&#34;E-T&#34;</span>},{<span style=color:#98c379>&#34;E&#34;</span>,<span style=color:#98c379>&#34;T&#34;</span>},{<span style=color:#98c379>&#34;T&#34;</span>,<span style=color:#98c379>&#34;T*F&#34;</span>},
</span></span><span style=display:flex><span>                    {<span style=color:#98c379>&#34;T&#34;</span>,<span style=color:#98c379>&#34;T*F&#34;</span>},{<span style=color:#98c379>&#34;T&#34;</span>,<span style=color:#98c379>&#34;F&#34;</span>},{<span style=color:#98c379>&#34;F&#34;</span>,<span style=color:#98c379>&#34;(E)&#34;</span>},{<span style=color:#98c379>&#34;F&#34;</span>,<span style=color:#98c379>&#34;i&#34;</span>}};<span style=color:#7f848e>//语法
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>char</span> <span style=color:#e06c75>follow</span>[<span style=color:#d19a66>300</span>][<span style=color:#d19a66>50</span>];
</span></span><span style=display:flex><span><span style=color:#7f848e>//实现语义分析所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>idx</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;<span style=color:#7f848e>//每个键值对的索引（key,value）
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e06c75>string</span> <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>N</span>];<span style=color:#7f848e>//每个单词的值
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>cla</span>[<span style=color:#e06c75>N</span>];<span style=color:#7f848e>//每个单词的类型
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>N</span>];<span style=color:#7f848e>//每个单词在语法中扮演的角色
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>T</span>[<span style=color:#e06c75>N</span>]<span style=color:#56b6c2>=</span>{};
</span></span><span style=display:flex><span><span style=color:#e5c07b>int</span> <span style=color:#e06c75>tt</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;<span style=color:#7f848e>//临时变量编号
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//函数定义
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//报错函数
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>void</span> <span style=color:#61afef;font-weight:700>report_error</span>(<span style=color:#e5c07b>int</span> <span style=color:#e06c75>errcla</span>){
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>char</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>str</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>switch</span> (<span style=color:#e06c75>errcla</span>){
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>1</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;十六进制数表示错误&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>2</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;八进制数表示错误&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>3</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;字符型常量定义错误&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>4</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;非法运算符&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>5</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;未定义符号&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>6</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;语法错误&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>7</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;未找到表达式&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>8</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;不是算符优先文法&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>11</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;缺少运算分量&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>12</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;不匹配的右括号&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>13</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;缺少运算符&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>14</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;缺少右括号&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#56b6c2>!</span><span style=color:#e06c75>k</span>){<span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34;词法分析发生错误!错误位置：第%d行，第%d个字符；错误类型：%s</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>,<span style=color:#e06c75>adx</span>,<span style=color:#e06c75>ady</span><span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#e06c75>str</span>);}
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span> (<span style=color:#e06c75>k</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>2</span>) { <span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34;语法分析发生错误！错误类型：%s, 错误位置：第%d行，第%d个字符</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>, <span style=color:#e06c75>str</span>, <span style=color:#e06c75>adx</span>,<span style=color:#e06c75>ady</span>); }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#7f848e>//实现语法分析所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e>//自定义读入函数
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>char</span> <span style=color:#61afef;font-weight:700>gc</span>(<span style=color:#e06c75>FILE</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>fp</span>,<span style=color:#e5c07b>int</span> <span style=color:#e06c75>index</span>){<span style=color:#7f848e>//index是换行允许位
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#e5c07b>char</span> <span style=color:#e06c75>ch</span> <span style=color:#56b6c2>=</span><span style=color:#e06c75>fgetc</span>(<span style=color:#e06c75>fp</span>);
</span></span><span style=display:flex><span>    <span style=color:#7f848e>//printf(&#34;%c &#34;,ch);
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;\n&#39;</span><span style=color:#56b6c2>&amp;&amp;</span><span style=color:#e06c75>index</span>){
</span></span><span style=display:flex><span>        <span style=color:#e06c75>adx</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>        <span style=color:#e06c75>ady</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#7f848e>//
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#7f848e>// printf(&#34;换行,%d&#34;,adx);
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> <span style=color:#e06c75>ady</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>    <span style=color:#7f848e>//printf(&#34;(%d,%d)\n&#34;,adx,ady);
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>ch</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>void</span> <span style=color:#61afef;font-weight:700>myfseek</span>(<span style=color:#e06c75>FILE</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>fp</span> ,<span style=color:#e5c07b>int</span> <span style=color:#e06c75>off</span> ,<span style=color:#e5c07b>int</span> <span style=color:#e06c75>whence</span> ){
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>EOF</span>){
</span></span><span style=display:flex><span>        <span style=color:#e06c75>fseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#e06c75>off</span>,<span style=color:#e06c75>whence</span>);
</span></span><span style=display:flex><span>        <span style=color:#e06c75>ady</span><span style=color:#56b6c2>+=</span><span style=color:#e06c75>off</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#7f848e>//查找类别并输出函数
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>lookup</span> (<span style=color:#e5c07b>char</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>token</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>n</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>while</span> (<span style=color:#e06c75>strcmp</span>(<span style=color:#e06c75>KeyWordTable</span>[<span style=color:#e06c75>n</span>], <span style=color:#e06c75>KEY_WORD_END</span>)) <span style=color:#7f848e>/*strcmp比较两串是否相同，若相同返回0*/</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#56b6c2>!</span><span style=color:#e06c75>strcmp</span>(<span style=color:#e06c75>KeyWordTable</span>[<span style=color:#e06c75>n</span>], <span style=color:#e06c75>token</span>)) <span style=color:#7f848e>/*比较token所指向的关键字和保留字表中哪个关键字相符*/</span>
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#c678dd>return</span> <span style=color:#e06c75>n</span><span style=color:#56b6c2>+</span><span style=color:#d19a66>1</span>; <span style=color:#7f848e>/*根据单词分类码表I，设置正确的关键字类别码，并返回此类别码的值*/</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#e06c75>n</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#d19a66>7</span>; <span style=color:#7f848e>/*单词不是关键字，而是标识符*/</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>void</span> <span style=color:#61afef;font-weight:700>out</span>(<span style=color:#e5c07b>int</span> <span style=color:#e06c75>c</span>, <span style=color:#e06c75>string</span> <span style=color:#e06c75>val</span>) {
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>char</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>str</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>switch</span> (<span style=color:#e06c75>c</span>) {
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>1</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;BEGIN&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>2</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;END&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>3</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;CONST&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>4</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;VAR&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>5</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;IF&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>6</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;ELSE&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>7</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;ID&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>8</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;INT&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>9</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;REAL&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>10</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;LT&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>11</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;LE&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>12</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;EQ&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>13</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;NE&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>14</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;GT&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>15</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;GE&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>16</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;IS&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>17</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;PL&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>18</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;MI&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>19</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;MU&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>20</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;DI&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>21</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;AND&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>22</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;OR&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>23</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;NOT&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>24</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;STR&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>25</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;CHAR&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>26</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;OCT&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>27</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;HEX&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>28</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;LB&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>29</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;RB&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>30</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>            <span style=color:#e06c75>str</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;NS&#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#e06c75>cla</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>c</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>val</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>LB</span><span style=color:#56b6c2>&amp;&amp;</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>RB</span><span style=color:#56b6c2>&amp;&amp;</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>PL</span><span style=color:#56b6c2>&amp;&amp;</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>MI</span><span style=color:#56b6c2>&amp;&amp;</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>MU</span><span style=color:#56b6c2>&amp;&amp;</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>DI</span><span style=color:#56b6c2>&amp;&amp;</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>NS</span>){<span style=color:#7f848e>//不是运算符号
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#39;i&#39;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> {
</span></span><span style=display:flex><span>        <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>idx</span>]  <span style=color:#56b6c2>=</span> <span style=color:#e06c75>c</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>mode</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>1</span>){
</span></span><span style=display:flex><span>        <span style=color:#e06c75>cout</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;(&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>str</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;,&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>val</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;)&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>endl</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#7f848e>//实验给的没啥用函数
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>HandleOtherWord</span> (<span style=color:#e5c07b>void</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>ClassOther</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>HandleError</span> (<span style=color:#e5c07b>void</span>){
</span></span><span style=display:flex><span>    <span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34;Error!</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>); <span style=color:#c678dd>return</span> <span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>GetChar</span> (<span style=color:#e06c75>FILE</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>fp</span>) {
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>c</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>c</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>!=</span> <span style=color:#e06c75>EOF</span>) {
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#e06c75>isdigit</span>(<span style=color:#e06c75>c</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#e06c75>d</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>c</span> <span style=color:#56b6c2>-</span> <span style=color:#98c379>&#39;0&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>return</span> <span style=color:#e06c75>DIGIT</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>==</span> <span style=color:#98c379>&#39;.&#39;</span>) <span style=color:#c678dd>return</span> <span style=color:#e06c75>POINT</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>==</span> <span style=color:#98c379>&#39;E&#39;</span> <span style=color:#56b6c2>||</span> <span style=color:#e06c75>c</span> <span style=color:#56b6c2>==</span> <span style=color:#98c379>&#39;e&#39;</span>) <span style=color:#c678dd>return</span> <span style=color:#e06c75>POWER</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>==</span> <span style=color:#98c379>&#39;+&#39;</span>) <span style=color:#c678dd>return</span> <span style=color:#e06c75>PLUS</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span> (<span style=color:#e06c75>c</span> <span style=color:#56b6c2>==</span> <span style=color:#98c379>&#39;-&#39;</span>) <span style=color:#c678dd>return</span> <span style=color:#e06c75>MINUS</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>OTHER</span>;<span style=color:#7f848e>//返回当前字符的类
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>EXCUTE</span> (<span style=color:#e5c07b>int</span> <span style=color:#e06c75>state</span>, <span style=color:#e5c07b>int</span> <span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#c678dd>switch</span> (<span style=color:#e06c75>state</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>0</span><span style=color:#56b6c2>:</span><span style=color:#c678dd>switch</span> (<span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DIGIT</span>: <span style=color:#e06c75>n</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;<span style=color:#e06c75>p</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;<span style=color:#e06c75>e</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;<span style=color:#e06c75>w</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>d</span>;<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;<span style=color:#e06c75>Class</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>UCON</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>POINT</span>: <span style=color:#e06c75>w</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;<span style=color:#e06c75>n</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;<span style=color:#e06c75>p</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;<span style=color:#e06c75>e</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>3</span>;<span style=color:#e06c75>Class</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>UCON</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>HandleOtherWord</span>( );<span style=color:#e06c75>Class</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>ClassOther</span>;
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EndState</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>1</span><span style=color:#56b6c2>:</span><span style=color:#c678dd>switch</span> (<span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DIGIT</span>: <span style=color:#e06c75>w</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>w</span><span style=color:#56b6c2>*</span><span style=color:#d19a66>10</span><span style=color:#56b6c2>+</span><span style=color:#e06c75>d</span>;<span style=color:#c678dd>break</span>;  <span style=color:#7f848e>//CurrentState=1
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>POINT</span>: <span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>POWER</span>: <span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>4</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>ICON</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>w</span>;<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EndState</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>2</span><span style=color:#56b6c2>:</span><span style=color:#c678dd>switch</span> (<span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DIGIT</span>: <span style=color:#e06c75>n</span><span style=color:#56b6c2>++</span>;<span style=color:#e06c75>w</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>w</span><span style=color:#56b6c2>*</span><span style=color:#d19a66>10</span><span style=color:#56b6c2>+</span><span style=color:#e06c75>d</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>POWER</span>: <span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>4</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>FCON</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>w</span><span style=color:#56b6c2>*</span><span style=color:#e06c75>pow</span>(<span style=color:#d19a66>10</span>,<span style=color:#e06c75>e</span><span style=color:#56b6c2>*</span><span style=color:#e06c75>p</span><span style=color:#56b6c2>-</span><span style=color:#e06c75>n</span>);<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EndState</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>3</span><span style=color:#56b6c2>:</span><span style=color:#c678dd>switch</span> (<span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DIGIT</span>: <span style=color:#e06c75>n</span><span style=color:#56b6c2>++</span>;<span style=color:#e06c75>w</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>w</span><span style=color:#56b6c2>*</span><span style=color:#d19a66>10</span><span style=color:#56b6c2>+</span><span style=color:#e06c75>d</span>;<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>2</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>HandleError</span>( );<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EndState</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>4</span><span style=color:#56b6c2>:</span><span style=color:#c678dd>switch</span> (<span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DIGIT</span>: <span style=color:#e06c75>p</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>p</span><span style=color:#56b6c2>*</span><span style=color:#d19a66>10</span><span style=color:#56b6c2>+</span><span style=color:#e06c75>d</span>;<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>6</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>MINUS</span>: <span style=color:#e06c75>e</span><span style=color:#56b6c2>=-</span><span style=color:#d19a66>1</span>;<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>5</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>PLUS</span>: <span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>5</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>HandleError</span>( );<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EndState</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>5</span><span style=color:#56b6c2>:</span><span style=color:#c678dd>switch</span> (<span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DIGIT</span>: <span style=color:#e06c75>p</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>p</span><span style=color:#56b6c2>*</span><span style=color:#d19a66>10</span><span style=color:#56b6c2>+</span><span style=color:#e06c75>d</span>;<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>6</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>HandleError</span>( );<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EndState</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>case</span> <span style=color:#d19a66>6</span><span style=color:#56b6c2>:</span><span style=color:#c678dd>switch</span> (<span style=color:#e06c75>symbol</span>)
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DIGIT</span>:<span style=color:#e06c75>p</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>p</span><span style=color:#56b6c2>*</span><span style=color:#d19a66>10</span><span style=color:#56b6c2>+</span><span style=color:#e06c75>d</span>;<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>FCON</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>w</span><span style=color:#56b6c2>*</span><span style=color:#e06c75>pow</span>(<span style=color:#d19a66>10</span>,<span style=color:#e06c75>e</span><span style=color:#56b6c2>*</span><span style=color:#e06c75>p</span><span style=color:#56b6c2>-</span><span style=color:#e06c75>n</span>);<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EndState</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>CurrentState</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>LEX</span> (<span style=color:#e06c75>FILE</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>fp</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>ch</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>while</span> (<span style=color:#e06c75>CurrentState</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>EndState</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>GetChar</span>(<span style=color:#e06c75>fp</span>);
</span></span><span style=display:flex><span>        <span style=color:#e06c75>EXCUTE</span> (<span style=color:#e06c75>CurrentState</span>,<span style=color:#e06c75>ch</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>Class</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#7f848e>//拓展实验分析十六进制数所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>ISABCDEF</span>(<span style=color:#e5c07b>char</span> <span style=color:#e06c75>x</span>){
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>n</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>char</span> <span style=color:#e06c75>al</span>[<span style=color:#d19a66>20</span>]<span style=color:#56b6c2>=</span>{<span style=color:#98c379>&#39;A&#39;</span>,<span style=color:#98c379>&#39;B&#39;</span>,<span style=color:#98c379>&#39;C&#39;</span>,<span style=color:#98c379>&#39;D&#39;</span>,<span style=color:#98c379>&#39;E&#39;</span>,<span style=color:#98c379>&#39;F&#39;</span>,<span style=color:#98c379>&#39;a&#39;</span>,<span style=color:#98c379>&#39;b&#39;</span>,<span style=color:#98c379>&#39;c&#39;</span>,<span style=color:#98c379>&#39;d&#39;</span>,<span style=color:#98c379>&#39;e&#39;</span>,<span style=color:#98c379>&#39;f&#39;</span>,<span style=color:#98c379>&#39;#&#39;</span>};
</span></span><span style=display:flex><span>    <span style=color:#c678dd>while</span> (<span style=color:#e06c75>al</span>[<span style=color:#e06c75>n</span>]<span style=color:#56b6c2>!=</span><span style=color:#98c379>&#39;#&#39;</span>) <span style=color:#7f848e>/*strcmp比较两串是否相同，若相同返回0*/</span>
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span> (<span style=color:#e06c75>al</span>[<span style=color:#e06c75>n</span>]<span style=color:#56b6c2>==</span><span style=color:#e06c75>x</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#c678dd>return</span> <span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#e06c75>n</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#d19a66>0</span>; <span style=color:#7f848e>/*单词不是关键字，而是标识符*/</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#7f848e>//扫描器与单个扫描
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>void</span> <span style=color:#61afef;font-weight:700>scanner</span>(<span style=color:#e06c75>FILE</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>fp</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>i</span>, <span style=color:#e06c75>c</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span> (<span style=color:#e06c75>isalpha</span> (<span style=color:#e06c75>ch</span>))
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#e06c75>TOKEN</span>[<span style=color:#d19a66>0</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>); <span style=color:#e06c75>i</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;<span style=color:#7f848e>//初始化
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>while</span> (<span style=color:#e06c75>isalnum</span> (<span style=color:#e06c75>ch</span>))<span style=color:#7f848e>//是否为字母或者数字
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        {
</span></span><span style=display:flex><span>            <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span> <span style=color:#98c379>&#39;\0&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>lookup</span>(<span style=color:#e06c75>TOKEN</span>);<span style=color:#7f848e>//查找源程序，
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>c</span><span style=color:#56b6c2>==</span><span style=color:#e06c75>ID</span>)<span style=color:#e06c75>out</span>(<span style=color:#e06c75>c</span>,<span style=color:#e06c75>TOKEN</span>);
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> <span style=color:#e06c75>out</span>(<span style=color:#e06c75>c</span>,<span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>isdigit</span>(<span style=color:#e06c75>ch</span>))
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#7f848e>//将数字部分读入token，
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#e06c75>TOKEN</span>[<span style=color:#d19a66>0</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>;<span style=color:#e06c75>i</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;0&#39;</span>){
</span></span><span style=display:flex><span>            <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;x&#39;</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>                <span style=color:#e5c07b>bool</span> <span style=color:#e06c75>is</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>while</span>(<span style=color:#e06c75>isalnum</span>(<span style=color:#e06c75>ch</span>))
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>isalpha</span>(<span style=color:#e06c75>ch</span>)<span style=color:#56b6c2>&amp;&amp;!</span><span style=color:#e06c75>ISABCDEF</span>(<span style=color:#e06c75>ch</span>)){
</span></span><span style=display:flex><span>                        <span style=color:#e06c75>report_error</span>(<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>                        <span style=color:#e06c75>is</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>                        <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#39;\0&#39;</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>is</span>){
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>HEX</span>;
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>out</span>(<span style=color:#e06c75>c</span>,<span style=color:#e06c75>TOKEN</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>isdigit</span>(<span style=color:#e06c75>ch</span>)){
</span></span><span style=display:flex><span>                <span style=color:#e5c07b>bool</span> <span style=color:#e06c75>is</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>while</span>(<span style=color:#e06c75>isdigit</span>(<span style=color:#e06c75>ch</span>))
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>&gt;=</span><span style=color:#98c379>&#39;8&#39;</span>){
</span></span><span style=display:flex><span>                        <span style=color:#e06c75>report_error</span>(<span style=color:#d19a66>2</span>);
</span></span><span style=display:flex><span>                        <span style=color:#e06c75>is</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>                        <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                    <span style=color:#c678dd>else</span> {
</span></span><span style=display:flex><span>                        <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>                        <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>                    }
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>                <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span> <span style=color:#98c379>&#39;\0&#39;</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>if</span>(<span style=color:#e06c75>is</span>){
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>OCT</span>;
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>out</span>(<span style=color:#e06c75>c</span>,<span style=color:#e06c75>TOKEN</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>else</span> {
</span></span><span style=display:flex><span>                <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#39;\0&#39;</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>INT</span>,<span style=color:#e06c75>TOKEN</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>            <span style=color:#c678dd>while</span>(<span style=color:#e06c75>isdigit</span>(<span style=color:#e06c75>ch</span>))
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>                <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;.&#39;</span><span style=color:#56b6c2>||</span><span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;E&#39;</span><span style=color:#56b6c2>||</span><span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;e&#39;</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#e06c75>i</span><span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>                <span style=color:#e06c75>LEX</span>(<span style=color:#e06c75>fp</span>);
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>REAL</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>if</span>(<span style=color:#e06c75>mode</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>1</span>){
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>cout</span><span style=color:#56b6c2>&lt;&lt;</span> <span style=color:#98c379>&#34;(&#34;</span> <span style=color:#56b6c2>&lt;&lt;</span> <span style=color:#98c379>&#34;REAL,&#34;</span> <span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>FCON</span><span style=color:#56b6c2>&lt;&lt;</span> <span style=color:#98c379>&#34;)&#34;</span><span style=color:#56b6c2>&lt;&lt;</span> <span style=color:#e06c75>endl</span>;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#7f848e>//cout&lt;&lt; &#34;(&#34; &lt;&lt; &#34;REAL,&#34; &lt;&lt;FCON&lt;&lt; &#34;)&#34;&lt;&lt; endl;
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>                <span style=color:#e06c75>cla</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>REAL</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>to_string</span>(<span style=color:#e06c75>FCON</span>);
</span></span><span style=display:flex><span>                <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#39;i&#39;</span>;
</span></span><span style=display:flex><span>                <span style=color:#7f848e>//printf(&#34;(REAL,%.12lf  %e   %g  )\n&#34;,FCON);//添加范围识别
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>else</span>{
</span></span><span style=display:flex><span>                <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span> <span style=color:#98c379>&#39;\0&#39;</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>INT</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>c</span>,<span style=color:#e06c75>TOKEN</span>);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;\&#34;&#39;</span>){
</span></span><span style=display:flex><span>        <span style=color:#e06c75>TOKEN</span>[<span style=color:#d19a66>0</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>); <span style=color:#e06c75>i</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>while</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>!=</span><span style=color:#98c379>&#39;\&#34;&#39;</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>;<span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#39;\0&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>STR</span>;
</span></span><span style=display:flex><span>        <span style=color:#e06c75>out</span>(<span style=color:#e06c75>c</span>,<span style=color:#e06c75>TOKEN</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;\&#39;&#39;</span>){
</span></span><span style=display:flex><span>        <span style=color:#e06c75>TOKEN</span>[<span style=color:#d19a66>0</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>); <span style=color:#e06c75>i</span><span style=color:#56b6c2>=</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>while</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>!=</span><span style=color:#98c379>&#39;\&#39;&#39;</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>; <span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span><span style=color:#56b6c2>++</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>ch</span>;<span style=color:#e06c75>TOKEN</span>[<span style=color:#e06c75>i</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#39;\0&#39;</span>;
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span>(<span style=color:#e06c75>strlen</span>(<span style=color:#e06c75>TOKEN</span>)<span style=color:#56b6c2>&gt;</span><span style=color:#d19a66>3</span>)<span style=color:#e06c75>report_error</span>(<span style=color:#d19a66>3</span>);
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>CHAR</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>out</span>(<span style=color:#e06c75>c</span>,<span style=color:#e06c75>TOKEN</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span>
</span></span><span style=display:flex><span>        <span style=color:#c678dd>switch</span>(<span style=color:#e06c75>ch</span>)
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;&lt;&#39;</span><span style=color:#56b6c2>:</span> <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;=&#39;</span>){<span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>LE</span>;<span style=color:#e06c75>out</span>(<span style=color:#e06c75>LE</span>,<span style=color:#98c379>&#34; &#34;</span>);}
</span></span><span style=display:flex><span>                <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;&gt;&#39;</span>) {<span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>NE</span>;<span style=color:#e06c75>out</span> (<span style=color:#e06c75>NE</span>,<span style=color:#98c379>&#34; &#34;</span>);}
</span></span><span style=display:flex><span>                <span style=color:#c678dd>else</span>
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>myfseek</span> (<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>LT</span>;
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>out</span> (<span style=color:#e06c75>LT</span>,<span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;=&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>EQ</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>EQ</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;&gt;&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;=&#39;</span>){<span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>GE</span>;<span style=color:#e06c75>out</span>(<span style=color:#e06c75>GE</span>,<span style=color:#98c379>&#34; &#34;</span>);}
</span></span><span style=display:flex><span>                <span style=color:#c678dd>else</span>
</span></span><span style=display:flex><span>                {
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>GT</span>;
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>out</span>(<span style=color:#e06c75>GT</span>,<span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;:&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>ch</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>fp</span>,<span style=color:#d19a66>0</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>if</span>(<span style=color:#e06c75>ch</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;=&#39;</span>){<span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>IS</span>;<span style=color:#e06c75>out</span>(<span style=color:#e06c75>IS</span>,<span style=color:#98c379>&#34; &#34;</span>);}
</span></span><span style=display:flex><span>                <span style=color:#c678dd>else</span>{
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>fp</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>report_error</span>(<span style=color:#d19a66>4</span>);
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;+&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>PL</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>PL</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;-&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>MI</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>MI</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;*&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>MU</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>MU</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;/&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>DI</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>DI</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;&amp;&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>AND</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>AND</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;|&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>OR</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>OR</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;!&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>NOT</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>NOT</span>, <span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;(&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span> <span style=color:#e06c75>LB</span> ;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>( <span style=color:#e06c75>LB</span> ,<span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;)&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>RB</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>RB</span>,<span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>case</span> <span style=color:#98c379>&#39;#&#39;</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>c</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>NS</span>;
</span></span><span style=display:flex><span>                <span style=color:#e06c75>out</span>(<span style=color:#e06c75>NS</span>,<span style=color:#98c379>&#34; &#34;</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>default</span><span style=color:#56b6c2>:</span>
</span></span><span style=display:flex><span>                <span style=color:#e06c75>report_error</span>(<span style=color:#d19a66>5</span>);
</span></span><span style=display:flex><span>                <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> ;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>scan</span>(<span style=color:#e06c75>FILE</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>test</span>){<span style=color:#7f848e>//向前读一个单词，帮助避开了空格，回车等符号
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#e5c07b>char</span> <span style=color:#e06c75>c</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>((<span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>gc</span>(<span style=color:#e06c75>test</span>,<span style=color:#d19a66>1</span>))<span style=color:#56b6c2>!=</span><span style=color:#e06c75>EOF</span>){<span style=color:#7f848e>//试探是否到了文档尾
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#c678dd>while</span>(<span style=color:#e06c75>c</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39; &#39;</span><span style=color:#56b6c2>||</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;\t&#39;</span><span style=color:#56b6c2>||</span><span style=color:#e06c75>c</span><span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;\n&#39;</span>){<span style=color:#7f848e>//越过无意义符号
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>c</span><span style=color:#56b6c2>=</span> <span style=color:#e06c75>gc</span>(<span style=color:#e06c75>test</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span>(<span style=color:#e06c75>c</span><span style=color:#56b6c2>!=</span><span style=color:#e06c75>EOF</span>){<span style=color:#7f848e>//防止空格回车结尾
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>myfseek</span>(<span style=color:#e06c75>test</span>,<span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>,<span style=color:#d19a66>1</span>);
</span></span><span style=display:flex><span>            <span style=color:#e06c75>scanner</span>(<span style=color:#e06c75>test</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> {<span style=color:#7f848e>//有特殊符号到了文档尾
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>cla</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>NS</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34; &#34;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>NS</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> {<span style=color:#7f848e>//没有特殊符号也到了文档尾
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#e06c75>cla</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>NS</span>;
</span></span><span style=display:flex><span>        <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34; &#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>NS</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#e06c75>idx</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#7f848e>//实现语法分析所需
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>void</span> <span style=color:#61afef;font-weight:700>gen</span>(<span style=color:#e5c07b>int</span> <span style=color:#e06c75>r</span>,<span style=color:#e06c75>FILE</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>fp</span>){<span style=color:#7f848e>//计算值并且输出四元式,给出表达式编号
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#e06c75>string</span> <span style=color:#e06c75>g2</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>R1</span>[<span style=color:#e06c75>r</span>][<span style=color:#d19a66>1</span>];
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>len</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>g2</span>.<span style=color:#e06c75>length</span>();
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>k1</span>,<span style=color:#e06c75>k2</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>string</span> <span style=color:#e06c75>x1</span>,<span style=color:#e06c75>x2</span>;
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>char</span> <span style=color:#e06c75>sym</span>;
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>len</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>1</span>) {<span style=color:#7f848e>//iTEF
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#e06c75>T</span>[<span style=color:#e06c75>idx</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>T</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span>]];<span style=color:#7f848e>//传递中间变量位置
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span>]];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>len</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>3</span>){<span style=color:#7f848e>//(E)，不分配新的空间
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#c678dd>if</span>(<span style=color:#e06c75>chra</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span>]]<span style=color:#56b6c2>==</span><span style=color:#e06c75>RB</span>){
</span></span><span style=display:flex><span>            <span style=color:#e06c75>T</span>[<span style=color:#e06c75>idx</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>tt</span><span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>idx</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>valu</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span>]];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> {<span style=color:#7f848e>//算数,分配新的空间
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e5c07b>int</span> <span style=color:#e06c75>sy</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>sy</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span><span style=color:#56b6c2>-</span><span style=color:#d19a66>1</span>]];
</span></span><span style=display:flex><span>            <span style=color:#e06c75>k1</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>T</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span><span style=color:#56b6c2>-</span><span style=color:#d19a66>2</span>]];<span style=color:#7f848e>//为输出四元式的参数1
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>k2</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>T</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span>]];<span style=color:#7f848e>//输出四元式的参数2
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#c678dd>switch</span>(<span style=color:#e06c75>sy</span>){
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>PL</span>:
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>sym</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#39;+&#39;</span>;
</span></span><span style=display:flex><span>                    <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>MI</span>:
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>sym</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#39;-&#39;</span>;
</span></span><span style=display:flex><span>                    <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>DI</span>:
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>sym</span><span style=color:#56b6c2>=</span><span style=color:#98c379>&#39;/&#39;</span>;
</span></span><span style=display:flex><span>                    <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>                <span style=color:#c678dd>case</span> <span style=color:#e06c75>MU</span>:
</span></span><span style=display:flex><span>                    <span style=color:#e06c75>sym</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#39;*&#39;</span>;
</span></span><span style=display:flex><span>                    <span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>k1</span><span style=color:#56b6c2>==-</span><span style=color:#d19a66>1</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>x1</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>valu</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span><span style=color:#56b6c2>-</span><span style=color:#d19a66>2</span>]];
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>else</span> <span style=color:#e06c75>x1</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;T&#34;</span><span style=color:#56b6c2>+</span> <span style=color:#e06c75>to_string</span>(<span style=color:#e06c75>k1</span>);
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>k2</span><span style=color:#56b6c2>==-</span><span style=color:#d19a66>1</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>x2</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>valu</span>[<span style=color:#e06c75>mea</span>[<span style=color:#e06c75>meat</span>]];
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#c678dd>else</span> <span style=color:#e06c75>x2</span> <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;T&#34;</span><span style=color:#56b6c2>+</span> <span style=color:#e06c75>to_string</span>(<span style=color:#e06c75>k2</span>);
</span></span><span style=display:flex><span>            <span style=color:#e06c75>T</span>[<span style=color:#e06c75>idx</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>tt</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>mode</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>3</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>cout</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;(&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>sym</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;,&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>x1</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;,&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>x2</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;,T&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>T</span>[<span style=color:#e06c75>idx</span>]<span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;)&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>endl</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#e06c75>fprintf</span>(<span style=color:#e06c75>fp</span>,<span style=color:#98c379>&#34;(%c,%s,%s,T%d)</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>,<span style=color:#e06c75>sym</span>,<span style=color:#e06c75>x1</span>.<span style=color:#e06c75>c_str</span>(),<span style=color:#e06c75>x2</span>.<span style=color:#e06c75>c_str</span>(),<span style=color:#e06c75>T</span>[<span style=color:#e06c75>idx</span>]);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> ;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>void</span> <span style=color:#61afef;font-weight:700>slr_init</span>(){
</span></span><span style=display:flex><span>    <span style=color:#c678dd>for</span> (<span style=color:#e5c07b>int</span> <span style=color:#e06c75>i</span> <span style=color:#56b6c2>=</span> <span style=color:#d19a66>0</span>; <span style=color:#e06c75>i</span> <span style=color:#56b6c2>&lt;</span> <span style=color:#d19a66>200</span>; <span style=color:#56b6c2>++</span><span style=color:#e06c75>i</span>) {
</span></span><span style=display:flex><span>        <span style=color:#c678dd>for</span> (<span style=color:#e5c07b>int</span> <span style=color:#e06c75>j</span> <span style=color:#56b6c2>=</span> <span style=color:#d19a66>0</span>; <span style=color:#e06c75>j</span> <span style=color:#56b6c2>&lt;</span> <span style=color:#d19a66>200</span>; <span style=color:#56b6c2>++</span><span style=color:#e06c75>j</span>) {
</span></span><span style=display:flex><span>            <span style=color:#e06c75>action</span>[<span style=color:#e06c75>i</span>][<span style=color:#e06c75>j</span>] <span style=color:#56b6c2>=</span> <span style=color:#e5c07b>NULL</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;S4&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#98c379>&#39;i&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S5&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S6&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S7&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#e06c75>NS</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;Acc&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#e06c75>PL</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#e06c75>MI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#e06c75>NS</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;R3&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S8&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S9&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#e06c75>NS</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;R6&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#e06c75>LB</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S4&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#98c379>&#39;i&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S5&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#e06c75>NS</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;R8&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#e06c75>LB</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#e06c75>LB</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#e06c75>LB</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#e06c75>LB</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S4&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#98c379>&#39;i&#39;</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#98c379>&#39;i&#39;</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#98c379>&#39;i&#39;</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#98c379>&#39;i&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S5&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span> <span style=color:#98c379>&#34;S15&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;S6&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;S7&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;R1&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;R2&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;S8&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;S9&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#e06c75>NS</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;R4&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#e06c75>NS</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;R5&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#e06c75>RB</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#e06c75>PL</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#e06c75>MI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#e06c75>MU</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#e06c75>DI</span>] <span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#e06c75>NS</span>] <span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;R7&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#7f848e>//错误分析类型
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#e06c75>LB</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e3&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#e06c75>RB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#e06c75>RB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#e06c75>RB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#e06c75>RB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#e06c75>RB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#e06c75>RB</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#e06c75>RB</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e2&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#e06c75>PL</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#e06c75>PL</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#e06c75>PL</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#e06c75>PL</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#e06c75>PL</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#e06c75>PL</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e1&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#e06c75>MI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#e06c75>MI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#e06c75>MI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#e06c75>MI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#e06c75>MI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#e06c75>MI</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e1&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#e06c75>MU</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e1&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#e06c75>DI</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e1&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>1</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>2</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>3</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>5</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>11</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>12</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>13</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>14</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>15</span>][<span style=color:#98c379>&#39;i&#39;</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e3&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>0</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>4</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>6</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>7</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>8</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#d19a66>9</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e1&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>action</span>[<span style=color:#d19a66>10</span>][<span style=color:#e06c75>NS</span>]<span style=color:#56b6c2>=</span><span style=color:#98c379>&#34;e4&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>0</span>][<span style=color:#98c379>&#39;E&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>1</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>0</span>][<span style=color:#98c379>&#39;T&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>0</span>][<span style=color:#98c379>&#39;F&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>3</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>4</span>][<span style=color:#98c379>&#39;E&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>10</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>4</span>][<span style=color:#98c379>&#39;T&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>4</span>][<span style=color:#98c379>&#39;F&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>3</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>6</span>][<span style=color:#98c379>&#39;T&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>11</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>6</span>][<span style=color:#98c379>&#39;F&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>3</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>7</span>][<span style=color:#98c379>&#39;T&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>12</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>7</span>][<span style=color:#98c379>&#39;F&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>3</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>8</span>][<span style=color:#98c379>&#39;F&#39;</span>] <span style=color:#56b6c2>=</span> <span style=color:#d19a66>13</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>Goto</span>[<span style=color:#d19a66>9</span>][<span style=color:#98c379>&#39;F&#39;</span>]<span style=color:#56b6c2>=</span> <span style=color:#d19a66>14</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>strcpy</span>(<span style=color:#e06c75>follow</span>[<span style=color:#98c379>&#39;E&#39;</span>],<span style=color:#98c379>&#34;#)+-&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>strcpy</span>(<span style=color:#e06c75>follow</span>[<span style=color:#98c379>&#39;T&#39;</span>],<span style=color:#98c379>&#34;#)+_*/&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>strcpy</span>(<span style=color:#e06c75>follow</span>[<span style=color:#98c379>&#39;F&#39;</span>],<span style=color:#98c379>&#34;#)+_*/&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>sta</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>stat</span>]<span style=color:#56b6c2>=</span><span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#e06c75>syb</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>sybt</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>NS</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#e5c07b>void</span> <span style=color:#61afef;font-weight:700>superSLR1</span>(<span style=color:#e06c75>FILE</span> <span style=color:#56b6c2>*</span><span style=color:#e06c75>fp</span>){
</span></span><span style=display:flex><span>    <span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34;开始slr分析：</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>slr_init</span>();
</span></span><span style=display:flex><span>    <span style=color:#e06c75>string</span> <span style=color:#e06c75>str</span>;<span style=color:#7f848e>//存储每一步的表达式
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>    <span style=color:#e5c07b>bool</span> <span style=color:#e06c75>x</span><span style=color:#56b6c2>=</span><span style=color:#e5c07b>true</span>;<span style=color:#7f848e>//合法位
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#e5c07b>int</span> <span style=color:#e06c75>index</span>;<span style=color:#7f848e>//登记位
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>index</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>scan</span>(<span style=color:#e06c75>fp</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>topsta</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>sta</span>[<span style=color:#e06c75>stat</span>];<span style=color:#7f848e>//状态栈
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#e06c75>inpsym</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>index</span>];<span style=color:#7f848e>//符号栈
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>    <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#e06c75>topsta</span>][<span style=color:#e06c75>inpsym</span>];<span style=color:#7f848e>//对应公式
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>    <span style=color:#e06c75>FILE</span> <span style=color:#56b6c2>*</span> <span style=color:#e06c75>result</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>fopen</span>(<span style=color:#98c379>&#34;/home/zql/CLionProjects/cpex/result.txt&#34;</span>,<span style=color:#98c379>&#34;w&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>fputs</span>(<span style=color:#98c379>&#34;实验三中间代码生成如下：</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>,<span style=color:#e06c75>result</span>);
</span></span><span style=display:flex><span>    <span style=color:#c678dd>while</span>(<span style=color:#e06c75>str</span><span style=color:#56b6c2>!=</span><span style=color:#98c379>&#34;Acc&#34;</span>){
</span></span><span style=display:flex><span>        <span style=color:#c678dd>if</span>(<span style=color:#e06c75>str</span>[<span style=color:#d19a66>0</span>]<span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;S&#39;</span>){
</span></span><span style=display:flex><span>            <span style=color:#e5c07b>int</span> <span style=color:#e06c75>num</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>str</span>.<span style=color:#e06c75>length</span>()<span style=color:#56b6c2>==</span><span style=color:#d19a66>2</span>) <span style=color:#e06c75>num</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>str</span>[<span style=color:#d19a66>1</span>]<span style=color:#56b6c2>-</span><span style=color:#98c379>&#39;0&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>str</span>.<span style=color:#e06c75>length</span>()<span style=color:#56b6c2>==</span><span style=color:#d19a66>3</span>)<span style=color:#e06c75>num</span><span style=color:#56b6c2>=</span>(<span style=color:#e06c75>str</span>[<span style=color:#d19a66>1</span>]<span style=color:#56b6c2>-</span><span style=color:#98c379>&#39;0&#39;</span>)<span style=color:#56b6c2>*</span><span style=color:#d19a66>10</span><span style=color:#56b6c2>+</span><span style=color:#e06c75>str</span>[<span style=color:#d19a66>2</span>]<span style=color:#56b6c2>-</span><span style=color:#98c379>&#39;0&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>mea</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>meat</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>index</span>;<span style=color:#7f848e>//当前符号入语义栈
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>chra</span>[<span style=color:#e06c75>index</span>]<span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;i&#39;</span>)<span style=color:#e06c75>T</span>[<span style=color:#e06c75>index</span>]<span style=color:#56b6c2>=-</span><span style=color:#d19a66>1</span>;<span style=color:#7f848e>//如果是数值，保留存储位置
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#7f848e>//下一个状态入状态栈，不会出错
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>sta</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>stat</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>num</span>;
</span></span><span style=display:flex><span>            <span style=color:#7f848e>//读入下一个符号，可能会读到错误的非终结符号
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>index</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>scan</span>(<span style=color:#e06c75>fp</span>);
</span></span><span style=display:flex><span>            <span style=color:#7f848e>//入符号栈
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>syb</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>sybt</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>index</span>];
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>mode</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>2</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34;移进操作, %d入状态栈, %d入符号栈, 输入串首为%d</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>,<span style=color:#e06c75>num</span>,<span style=color:#e06c75>syb</span>[<span style=color:#e06c75>sybt</span>],<span style=color:#e06c75>chra</span>[<span style=color:#e06c75>index</span>]);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span>(<span style=color:#e06c75>str</span>[<span style=color:#d19a66>0</span>]<span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;R&#39;</span>){
</span></span><span style=display:flex><span>            <span style=color:#e5c07b>int</span> <span style=color:#e06c75>num</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>str</span>[<span style=color:#d19a66>1</span>]<span style=color:#56b6c2>-</span><span style=color:#98c379>&#39;0&#39;</span>;<span style=color:#7f848e>//表达式编号
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>string</span> <span style=color:#e06c75>r</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>R1</span>[<span style=color:#e06c75>num</span>][<span style=color:#d19a66>1</span>];
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>mode</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>2</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>cout</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;归约操作, 根据R&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>num</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;, 表达式为&#34;</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#e06c75>r</span><span style=color:#56b6c2>&lt;&lt;</span><span style=color:#98c379>&#34;,&#34;</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#e5c07b>int</span> <span style=color:#e06c75>len</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>r</span>.<span style=color:#e06c75>length</span>();
</span></span><span style=display:flex><span>            <span style=color:#e06c75>stat</span><span style=color:#56b6c2>-=</span><span style=color:#e06c75>len</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>sybt</span><span style=color:#56b6c2>-=</span><span style=color:#e06c75>len</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>gen</span>(<span style=color:#e06c75>num</span>,<span style=color:#e06c75>result</span>);<span style=color:#7f848e>//计算并且生成四元式
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>meat</span><span style=color:#56b6c2>-=</span><span style=color:#e06c75>len</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>topsta</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>sta</span>[<span style=color:#e06c75>stat</span>];
</span></span><span style=display:flex><span>            <span style=color:#e06c75>syb</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>sybt</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>R1</span>[<span style=color:#e06c75>num</span>][<span style=color:#d19a66>0</span>][<span style=color:#d19a66>0</span>];<span style=color:#7f848e>//规约
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>mode</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>2</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34; 规约为的非终结符号%c，入符号栈,&#34;</span>,<span style=color:#e06c75>syb</span>[<span style=color:#e06c75>sybt</span>]);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#e06c75>sta</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>stat</span>]<span style=color:#56b6c2>=</span><span style=color:#e06c75>Goto</span>[<span style=color:#e06c75>topsta</span>][<span style=color:#e06c75>syb</span>[<span style=color:#e06c75>sybt</span>]];
</span></span><span style=display:flex><span>            <span style=color:#e06c75>mea</span>[<span style=color:#56b6c2>++</span><span style=color:#e06c75>meat</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>idx</span>;
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>mode</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>2</span>){
</span></span><span style=display:flex><span>                <span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34; 规约后%d入状态栈</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>,<span style=color:#e06c75>sta</span>[<span style=color:#e06c75>stat</span>] );
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            <span style=color:#e06c75>idx</span><span style=color:#56b6c2>++</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#c678dd>else</span> <span style=color:#c678dd>if</span> (<span style=color:#e06c75>str</span>[<span style=color:#d19a66>0</span>]<span style=color:#56b6c2>==</span><span style=color:#98c379>&#39;e&#39;</span>){
</span></span><span style=display:flex><span>            <span style=color:#7f848e>//说明按照str中的位置找到的错误，则当前符号栈顶的符号是错误的
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e5c07b>int</span> <span style=color:#e06c75>num</span><span style=color:#56b6c2>=</span> <span style=color:#e06c75>str</span>[<span style=color:#d19a66>1</span>]<span style=color:#56b6c2>-</span><span style=color:#98c379>&#39;0&#39;</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>report_error</span>(<span style=color:#e06c75>num</span><span style=color:#56b6c2>+</span><span style=color:#d19a66>10</span>);
</span></span><span style=display:flex><span>            <span style=color:#c678dd>if</span>(<span style=color:#e06c75>num</span><span style=color:#56b6c2>==</span><span style=color:#d19a66>4</span>)<span style=color:#c678dd>break</span>;
</span></span><span style=display:flex><span>            <span style=color:#e06c75>x</span><span style=color:#56b6c2>=</span><span style=color:#e5c07b>false</span>;
</span></span><span style=display:flex><span>            <span style=color:#7f848e>// 跳过当前的终结符号，将当前状态和下一个终结符号组合，寻找下一个表达式
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>            <span style=color:#e06c75>index</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>scan</span>(<span style=color:#e06c75>fp</span>);
</span></span><span style=display:flex><span>            <span style=color:#e06c75>syb</span>[<span style=color:#e06c75>sybt</span>] <span style=color:#56b6c2>=</span> <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>index</span>];
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#7f848e>//查表
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>        <span style=color:#e06c75>topsta</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>sta</span>[<span style=color:#e06c75>stat</span>];
</span></span><span style=display:flex><span>        <span style=color:#e06c75>inpsym</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>chra</span>[<span style=color:#e06c75>index</span>];
</span></span><span style=display:flex><span>        <span style=color:#e06c75>str</span><span style=color:#56b6c2>=</span><span style=color:#e06c75>action</span>[<span style=color:#e06c75>topsta</span>][<span style=color:#e06c75>inpsym</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#c678dd>if</span>(<span style=color:#e06c75>x</span>)<span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34;合法!</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> ;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#7f848e>//主函数
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span><span style=color:#e5c07b>int</span> <span style=color:#61afef;font-weight:700>main</span>()
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#e06c75>printf</span>(<span style=color:#98c379>&#34;请选择输出结果类型(查看实验一结果请输入1，类推):</span><span style=color:#98c379>\n</span><span style=color:#98c379>&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>scanf</span>(<span style=color:#98c379>&#34;%d&#34;</span>,<span style=color:#56b6c2>&amp;</span><span style=color:#e06c75>mode</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>FILE</span><span style=color:#56b6c2>*</span> <span style=color:#e06c75>test</span> <span style=color:#56b6c2>=</span> <span style=color:#e06c75>fopen</span>(<span style=color:#98c379>&#34;/home/zql/CLionProjects/cpex/text&#34;</span>,<span style=color:#98c379>&#34;r&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>superSLR1</span>(<span style=color:#e06c75>test</span>);
</span></span><span style=display:flex><span>    <span style=color:#e06c75>fclose</span>(<span style=color:#e06c75>test</span>);
</span></span><span style=display:flex><span>    <span style=color:#c678dd>return</span> <span style=color:#d19a66>0</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>\
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/>编译原理</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/diffusion%E7%AE%80%E4%BB%8B/><span class=title>« Prev</span><br><span>Diffusion简介</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>ZQLog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>